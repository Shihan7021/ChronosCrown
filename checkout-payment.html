<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Checkout ‚Äî Payment</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    /* Payment redirect overlay */
    .payment-overlay {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(10, 10, 10, 0.45);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      z-index: 9999;
    }
    .payment-overlay.show { display: flex; }
    .payment-overlay .box {
      width: min(92vw, 440px);
      border-radius: 12px;
      background: rgba(255,255,255,0.92);
      padding: 22px 24px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
      text-align: center;
    }
    .payment-overlay .spinner {
      margin: 8px auto 14px;
      width: 48px; height: 48px;
      border: 4px solid #e5e7eb; /* gray-200 */
      border-top-color: #2563eb; /* blue-600 */
      border-radius: 50%;
      animation: spin 0.9s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    .payment-overlay .title { font-size: 1.1rem; font-weight: 700; color: #111827; margin-bottom: 6px; }
    .payment-overlay .msg { font-size: 0.95rem; color: #374151; line-height: 1.35; }
    .payment-overlay .hint { font-size: 0.85rem; color: #6b7280; margin-top: 10px; }
  </style>
</head>
<body>
  <header class="header">
    <div class="container nav-wrap">
      <div class="brand">
        <div class="logo"><img src="assets/hero/logo.png" alt="ChronosCrown logo"></div>
        <!--<h1>ChronosCrown</h1>-->
      </div>

      <nav class="navlinks">
        <a href="index.html">Home</a>
        <a href="him.html">Him</a>
        <a href="her.html">Her</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>

      <div style="display:flex; gap:12px; align-items:center;">
        <a id="loginLink" href="login.html" class="btn secondary">Sign In</a>
        <a id="registerLink" href="register.html" class="btn">Register</a>

        <div id="userMenu" class="dropdown hidden">
          <span class="greeting" id="greetingText"></span>
          <div class="person-icon">üë§</div>
          <div class="dropdown-content">
            <a href="profile.html">My Profile</a>
            <a href="#" id="logoutBtn">Logout</a>
          </div>
        </div>

        <a href="cart.html" class="icon-btn" aria-label="Cart">
          <img src="/assets/icons/cart.svg" alt="Cart" style="height:22px;">
          <div class="badge cart-badge">0</div>
        </a>
      </div>
    </div>
  </header>

  <main class="container">
    <h2>Checkout ‚Äî Payment</h2>

    <div id="shipping-address" class="checkout-section">
      <h3>Shipping Address</h3>
      <div id="addressDisplay"></div>
    </div>

    <div id="order-summary" class="checkout-section">
      <h3>Order Summary</h3>
      <div id="cartItems"></div>
      <div id="totalAmount" style="margin-top:12px; font-weight:bold;"></div>
    </div>

    <div id="payment-method" class="checkout-section">
      <h3>Select Payment Method</h3>
      <label><input type="radio" name="payment" value="ipg" checked> Credit / Debit Card (IPG)</label>
      <label><input type="radio" name="payment" value="cod"> Cash on Delivery</label>
    </div>

    <button id="payNowBtn" class="btn primary" style="margin-top:16px;">Pay Now</button>
  </main>

  <footer class="footer">
    <div class="container footer-columns">
      <div class="footer-col footer-brand">
        <div class="logo"><img src="assets/hero/logo.png" alt="ChronosCrown logo"></div>
        
        <p class="meta">Timeless watches, modern craft.</p>
        <div class="socials">
          <a href="#" aria-label="Instagram">üì∏</a>
          <a href="#" aria-label="Facebook">üìò</a>
          <a href="#" aria-label="Twitter">üê¶</a>
        </div>
      </div>
      <div class="footer-col">
        <h4>Shop</h4>
        <a href="him.html">Him</a>
        <a href="her.html">Her</a>
        <a href="all-products.html">All Products</a>
      </div>
      <div class="footer-col">
        <h4>Support</h4>
        <a href="about.html">About Us</a>
        <a href="contact.html">Contact</a>
        <a href="track-order.html">Track Order</a>
        <a href="feedback.html">Feedback</a>
        <a href="privacy.html">Privacy Policy</a>
      </div>
      <div class="footer-col">
        <h4>Stay in the loop</h4>
        <form id="newsletterForm" class="newsletter" onsubmit="event.preventDefault(); alert('Subscribed!');">
          <input type="email" placeholder="Your email" required>
          <button class="btn secondary" type="submit">Subscribe</button>
        </form>
      </div>
    </div>
    <div class="container footer-bottom">
      <div>¬© 2025 ChronosCrown</div>
      <div class="meta">Free shipping over $150 ‚Ä¢ 2-year warranty</div>
    </div>
  </footer>

  <script type="module" src="js/firebase.init.js"></script>
  <script type="module" src="js/app.js"></script>
  <script type="module" src="js/checkout-payment.js"></script>
  <script type="module" src="js/main-auth.js"></script>

  <!-- Payment redirect overlay -->
  <div id="paymentOverlay" class="payment-overlay" aria-live="polite" aria-busy="true">
    <div class="box" role="alert" aria-labelledby="paymentOverlayTitle" aria-describedby="paymentOverlayMessage">
      <div class="spinner" aria-hidden="true"></div>
      <div id="paymentOverlayTitle" class="title">Redirecting to Secure Payment</div>
      <div id="paymentOverlayMessage" class="msg">Please wait while we connect to the bank. Do not close or refresh this page.</div>
      <div class="hint">This may take a few seconds‚Ä¶</div>
    </div>
  </div>
</body>
</html>
