<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CMS — Products</title>
  <link rel="stylesheet" href="css/cms-style.css">
  <script type="module">
  const cmsUser = JSON.parse(sessionStorage.getItem('cmsUser') || 'null');
  const allowedRoles = ['system', 'Admin', 'Manager', 'Associate'];
  if (!cmsUser || !allowedRoles.includes(cmsUser.role)) {
    alert('Access denied. Login as CMS user.');
    window.location.href = 'cms-login.html';
  }
</script>
</head>
<body>
  <div class="cms-header"><h2>Products Management</h2></div>

  <div class="cms-wrapper">
    <div class="cms-sidebar">
      <a href="cms-dashboard.html">Dashboard</a>
      <a href="cms-products.html" class="active">Products</a>
      <a href="cms-users.html">Users</a>
      <a href="cms-content.html">Content</a>
      <a href="cms-sales.html">Sales</a>
      <a href="cms-orders.html">Orders</a>
      <a href="cms-financials.html">Financials</a>
    </div>

    <div class="cms-content">
      <h3>Add / Edit Product</h3>

      <div class="form-card">
        <form id="productForm">
          <div class="form-row">
            <div class="form-group">
              <label>Name</label>
              <input id="productName" type="text" required>
            </div>
            <div class="form-group">
              <label>Price (Rs)</label>
              <input id="productPrice" type="number" step="0.01" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Strap Type</label>
              <select id="productStrap" required>
                <option value="">Select strap</option>
                <option>Leather</option>
                <option>Metal</option>
                <option>Silicone</option>
                <option>NATO</option>
                <option>Mesh</option>
              </select>
            </div>

            <div class="form-group">
                <label>Type</label>
                <select id="productType" required>
                <option value="">Select type</option>
                <option>Him</option>
                <option>Her</option>
                </select>
            </div>

            <div class="form-group">
              <label>Color</label>
              <select id="productColor" required>
                <option value="">Select color</option>
                <option>Black</option>
                <option>Silver</option>
                <option>Gold</option>
                <option>Brown</option>
                <option>Blue</option>
              </select>
            </div>

            <div class="form-group">
              <label>Size</label>
              <select id="productSize" required>
                <option value="">Select size</option>
                <option>34mm</option>
                <option>36mm</option>
                <option>38mm</option>
                <option>40mm</option>
                <option>42mm</option>
                <option>44mm</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group" style="flex:1;">
              <label>Description</label>
              <textarea id="productDesc" rows="3"></textarea>
            </div>
            <div class="form-group" style="max-width:180px">
              <label>Quantity (internal)</label>
              <input id="productQty" type="number" min="0" value="0">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label>Product Images (multiple — at least 1)</label>
              <input id="productImages" type="file" accept="image/*" multiple required>
              <div id="imagePreview" class="image-preview"></div>
            </div>
          </div>

          <div class="form-row" style="align-items:center; gap:24px;">
            <label style="display:flex; align-items:center; gap:8px;">
              <input id="productFeatured" type="checkbox"> Mark as Featured (max 9)
            </label>
            <label style="display:flex; align-items:center; gap:8px;">
              <input id="productAnimated" type="checkbox"> Mark as Animated (max 3)
            </label>
          </div>

          <div style="display:flex; gap:12px;">
            <button id="addProductBtn" class="btn" type="submit">Save Product</button>
            <button id="clearFormBtn" type="button" class="btn btn-danger">Clear</button>
          </div>
        </form>
      </div>

      <h3 style="margin-top:20px;">Products</h3>
      <div id="productList" class="product-list"></div>
    </div>
  </div>

  <script type="module" src="../js/firebase-config.js"></script>
  <script type="module" src="js/cms-products.js"></script>
</body>
</html>
